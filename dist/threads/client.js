"use strict";var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var w=(e,r)=>{for(var o in r)a(e,o,{get:r[o],enumerable:!0})},l=(e,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of p(r))!v.call(e,n)&&n!==o&&a(e,n,{get:()=>r[n],enumerable:!(i=g(r,n))||i.enumerable});return e};var f=e=>l(a({},"__esModule",{value:!0}),e);var S={};w(S,{getRegistration:()=>y,isServiceWorkerSupported:()=>W,registerThreads:()=>k,thread:()=>T,unregisterThreads:()=>x});module.exports=f(S);var t=null,s=new Map;async function k(e={}){if(typeof window>"u"||!("serviceWorker"in navigator))throw new Error("Service Workers are not supported in this environment");let{workerPath:r="/worker.js",scope:o="/",type:i="classic"}=e;try{return t=await navigator.serviceWorker.register(r,{scope:o,type:i}),navigator.serviceWorker.addEventListener("message",n=>{let{threadName:c,data:d}=n.data,u=s.get(c);u&&(u(d),s.delete(c))}),t}catch(n){throw new Error(`Failed to register service worker: ${n}`)}}function h(){if(!t)throw new Error("Service worker not registered. Call registerThreads() first.");let e=t.active||t.waiting||t.installing;if(!e)throw new Error("No active service worker found");return e}function T(e){return{execute(r){return h().postMessage({threadName:e,data:r}),{finish(i){s.set(e,i)}}}}}function W(){return typeof window<"u"&&"serviceWorker"in navigator}function y(){return t}async function x(){if(!t)return!1;let e=await t.unregister();return t=null,s.clear(),e}0&&(module.exports={getRegistration,isServiceWorkerSupported,registerThreads,thread,unregisterThreads});
